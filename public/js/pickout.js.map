{"version":3,"sources":["pickout.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"pickout.js","sourcesContent":["/*\r\n*\tPickout - Cool effect for field select on form\r\n*\tCopyright (c) 2016 Ktquez\r\n*\tProject repository: https://github.com/ktquez/pickout\r\n* \tMIT license.\r\n*/\r\n\r\nvar pickout = (function(){\r\n\r\n\t\"use strict\";\r\n\r\n\tconsole.time('BMPickout');\t\r\n\r\n\t// Own configuration of each field select\r\n\tvar ownConfig = {};\r\n\r\n\t// Default values\r\n\tvar defaults = {\r\n\t\ttheme : 'clean',\r\n\t\tsearch : false,\r\n\t\tnoResults : 'No Results',\r\n\t\tmultiple : false,\r\n\t\ttxtBtnMultiple : 'CONFIRM SELECTED'\r\n\t};\r\n\r\n\t/**\r\n\t * Utilities\r\n\t * Included in version 1.2.0\r\n\t */\r\n\tvar _ = {\r\n\t\tcreate : function (tag){\r\n\t\t\treturn document.createElement(tag);\r\n\t\t},\r\n\t\tattr : function(el, attr, value){\r\n\t\t\tif (!value) {\r\n\t\t\t\treturn el.getAttribute(attr);\r\n\t\t\t}\r\n\r\n\t\t\tif (Array.isArray(el)) {\r\n\t\t\t\tel.forEach(function(element) {\r\n\t\t\t\t\telement.setAttribute(attr, value);\t\t\t\t\t\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tel.setAttribute(attr, value);\r\n\t\t},\r\n\t\tevents : function(el, type, callback) {\r\n\t\t\tel.addEventListener(type, callback, false);\r\n\t\t},\r\n\t\ttoArray : function(el){\r\n\t\t\treturn [].slice.call(el);\r\n\t\t},\r\n\t\taddClass : function(el, selector){\r\n\t\t\tvar self = this;\r\n\t\t\tvar cls = !!self.attr(el, 'class') ? self.attr(el, 'class') : '';\r\n\t\t\tself.attr(el, 'class',  cls+ ' '+selector);\r\n\t\t},\r\n\t\trmClass : function(el, selector){\r\n\t\t\tvar self = this;\r\n\t\t\tif (Array.isArray(el)) {\r\n\t\t\t\tel.forEach(function(element) {\r\n\t\t\t\t\tself.attr(element, 'class', self.attr(element, 'class').replace(' '+selector, ''));\t\t\t\t\t\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tself.attr(el, 'class', self.attr(el, 'class').replace(' '+selector, ''));\r\n\t\t},\r\n\t\t$ : function(selector, el) {\r\n\t\t\treturn (el || document).querySelector(selector);\r\n\t\t},\r\n\t\t$$ : function(selector, el) {\r\n\t\t\treturn this.toArray((el || document).querySelectorAll(selector));\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Starts the module preparing the elements\r\n\t * @param config = String or object to setting\r\n\t */\r\n\tfunction init(config){\r\n\t\tsetElement(config);\r\n\t\tprepareElement();\r\n\t}\r\n\r\n\t/**\r\n\t * Defines the own configuration and assigns the select\r\n\t * @param {[type]} config = String or object to setting\r\n\t */\r\n\tfunction setElement(config){\r\n\r\n\t\tvar objConfig = typeof config === 'object' ? config : {};\r\n\r\n\t\tif (typeof config === 'string') {\r\n\t\t\tobjConfig.el = config;\r\n\t\t}\r\n\r\n\t\t// Retrieve the DOM to be manipulated\r\n\t\tobjConfig.DOM = _.$$(objConfig.el);\r\n\r\n\t\tmergeToDefaults(objConfig);\t\t\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Prepare the elements that will be handled by the module\r\n\t */\r\n\tfunction prepareElement(){\r\n\r\n\t\townConfig.DOM.map(function(select, index){\r\n\t\t\tcreateElements(select, index);\r\n\t\t});\r\n\r\n\t\tprepareModal();\r\n\t}\r\n\r\n\tfunction createElements(select, index){\r\n\r\n\t\t// Cache self config \r\n\t\tvar config = ownConfig,\r\n\t\t\tisMultiple = false;\r\n\r\n\t\tselect.style.display = 'none';\r\n\r\n\t\t/**\r\n\t\t * Multiple\r\n\t\t */\r\n\t\tif (select.hasAttribute('multiple')) {\r\n\t\t\tisMultiple = true;\r\n\t\t\tselect.name = select.name.indexOf('[]') !== -1 ? select.name : select.name+'[]';\r\n\t\t}\r\n\r\n\t\tvar parent = select.parentElement;\r\n\t\t_.attr(parent, 'style', 'position:relative;float:left;');\r\n\t\tvar placeholder = _.attr(select, 'placeholder');\r\n\r\n\t\t// Visual element simule field input\r\n\t\tvar field = _.create('div');\r\n\t\t_.addClass(field, 'pk-field -'+ config.theme + (!!isMultiple ? ' -multiple' : ''));\r\n\t\tif(!!placeholder) field.innerHTML = placeholder;\r\n\r\n\t\tif(parent.hasAttribute('for')) _.attr(field, 'id', _.attr(parent, 'for'));\r\n\t\t\r\n\t\tparent.appendChild(field);\r\n\r\n\t\t// Arrow\r\n\t\tif (!isMultiple) {\r\n\t\t\tvar arrow = _.create('span');\r\n\t\t\t_.addClass(arrow, 'pk-arrow -'+ config.theme);\t\t\t\r\n\t\t\tparent.appendChild(arrow);\r\n\t\t}\r\n\r\n\t\t// Event listener\r\n\t\t_.events(parent, 'click', function(e){\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\r\n\t\t\tconsole.time('BMPickoutFireModal');\t\r\n\r\n\t\t\t// Index do select\r\n\t\t\tconfig.currentIndex = index;\r\n\r\n\t\t\t// If is multiple\r\n\t\t\tconfig.multiple = !!isMultiple ? true : false;\r\n\r\n\t\t\t// Handle modal\r\n\t\t\tfireModal(config);\r\n\r\n\t\t\tconsole.timeEnd('BMPickoutFireModal');\t\r\n\r\n\t\t});\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Create and manage options in modal\r\n\t * @param  {Object} config = ownConfig\r\n\t */\r\n\tfunction fireModal(config){\r\n\r\n\t\tvar modal = _.$('.pk-modal'),\r\n\t\t\tselect = config.DOM[config.currentIndex],\r\n\t\t\tmain = _.$('.main', modal),\r\n\t\t\tdata;\r\n\r\n\t\t// modal theme\r\n\t\t_.addClass(modal, '-'+config.theme);\r\n\r\n\t\t// Avoid charging again when changing tab and the field gives focus again\r\n\t\tif (!!main.children.length) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar overlay = _.$('.pk-overlay');\r\n\t\tvar options = _.toArray(select);\r\n\r\n\t\tvar optionsModal = options.map(function(option, key){\r\n\t\t\tdata = {index: key, item: option};\r\n\t\t\tif (option.parentElement.localName === 'optgroup') {\r\n\t\t\t\tdata.optGroup = option.parentElement;\r\n\t\t\t}\r\n\t\t\treturn createOption(data, modal, config);\r\n\t\t});\r\n\r\n\t\t// Displaying overlay and modal\r\n\t\t_.addClass(modal, '-show');\r\n\t\t_.addClass(overlay, '-show');\r\n\r\n\t\tvar title = select.hasAttribute('placeholder') ? _.attr(select, 'placeholder') : 'Select to option';\r\n\t\t_.$('.head', modal).innerHTML = title;\r\n\t\t\r\n\t\t_.rmClass(modal, '-multiple');\r\n\t\t/**\r\n\t\t * Multiple option\r\n\t\t */\r\n\t\tif (config.multiple) {\r\n\t\t\tvar boxMultiple = _.$('.pk-multiple', modal);\r\n\t\t\t_.addClass(boxMultiple, '-show');\r\n\t\t\t_.addClass(boxMultiple, '-'+config.theme);\r\n\r\n\t\t\t_.addClass(modal, '-multiple');\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Search\r\n\t\t */\r\n\t\tif(config.search) {\r\n\t\t\tvar search = _.$('.pk-search', modal),\r\n\t\t\t\tinputSearch = _.$('input', search);\r\n\r\n\t\t\tinputSearch.value = '';\r\n\r\n\t\t\t// Focus no field search\r\n\t\t\tsetTimeout(function(){\r\n\t\t\t\tinputSearch.focus();\r\n\t\t\t}, 300);\r\n\r\n\t\t\t_.addClass(search, '-show');\r\n\r\n\t\t\tvar list = [];\r\n\r\n\t\t\t// Listener\r\n\t\t\t_.events(inputSearch, 'keyup', function(e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\te.stopPropagation();\t\t\r\n\r\n\t\t\t\tlist = _.$$('li', main);\t\r\n\t\t\t\t\r\n\t\t\t\tremoveAllElements(list);\t\t\t\t\r\n\r\n\t\t\t\t// If the search field is empty\r\n\t\t\t\tif (!e.target.value) {\r\n\t\t\t\t\teraseNoResult();\r\n\t\t\t\t\toptionsModal.map(function(option){\t\r\n\t\t\t\t\t\tif (Array.isArray(option)) {\r\n\t\t\t\t\t\t\tmain.appendChild(option[0]);\r\n\t\t\t\t\t\t\toption = option[1];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tmain.appendChild(option);\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\t\r\n\r\n\t\t\t\t\r\n\t\t\t\t// If any character typed\r\n\t\t\t\toptionsModal.map(function(option){\r\n\r\n\t\t\t\t\tif (Array.isArray(option)) {\r\n\t\t\t\t\t\toption = option[1];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Recover text element\r\n\t\t\t\t\tvar txt = option.lastChild;\r\n\r\n\t\t\t\t\t// Supress errors in IE\r\n\t\t\t\t\tif (!txt) return;\r\n\r\n\t\t\t\t\t// Compares the search with the text option\r\n\t\t\t\t\tif(txt.innerHTML.toLowerCase().indexOf(e.target.value.toLowerCase()) !== -1) {\r\n\t\t\t\t\t\teraseNoResult();\r\n\t\t\t\t\t\tmain.appendChild(option);\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// No results\r\n\t\t\t\tif (!main.children.length) {\r\n\t\t\t\t\tvar noResults = _.create('li');\r\n\t\t\t\t\t_.addClass(noResults, 'pk-no_result_search');\r\n\t\t\t\t\t_.addClass(noResults, '-'+config.theme);\r\n\t\t\t\t\tnoResults.innerHTML = config.noResults;\r\n\r\n\t\t\t\t\tmain.appendChild(noResults);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction eraseNoResult(){\r\n\t\t\t\t\t// hide No results\r\n\t\t\t\t\tvar noResult = _.$('.pk-no_result_search', main);\r\n\t\t\t\t\tif (noResult) {\r\n\t\t\t\t\t\tmain.removeChild(noResult);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Remove all elements\r\n\t\t\t\tfunction removeAllElements(list){\r\n\t\t\t\t\tlist.map(function(option){\r\n\t\t\t\t\t\tif (option.parentNode) {\r\n\t\t\t\t\t\t\tmain.removeChild(option);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n\t/**\r\n\t * Create by options group \r\n\t * @param  {Object} optGroup\r\n\t * @param  {object} main\r\n\t * @param  {object} config \r\n\t */\r\n\tfunction createOptGroup(optGroup, main, config) {\r\n\r\n\t\tvar titleGroup = _.create('li');\r\n\t\t_.addClass(titleGroup, 'pk-option-group -'+config.theme);\r\n\t\t_.attr(titleGroup, 'data-opt-group', optGroup.label);\r\n\t\t_.attr(titleGroup, 'data-type', optGroup.localName);\r\n\t\ttitleGroup.innerHTML = optGroup.label.toUpperCase();\r\n\t\tmain.appendChild(titleGroup);\r\n\t\t\r\n\t\treturn titleGroup;\r\n\t}\r\n\r\n\t/**\r\n\t * Creates options for the chosen select\r\n\t * @param  {Object} data = {index, option}\r\n\t * @param  {object DOM} modal  = Modal that will receive the list\r\n\t * @param  {object} config \r\n\t */\r\n\tfunction createOption(data, modal, config){\r\n\r\n\t\tvar select = config.DOM[config.currentIndex],\r\n\t\t\tmain = modal.querySelector('.main'),\r\n\t\t\tlists = [];\r\n\r\n\t\t// Title Option Group\r\n\t\tif (!!data.optGroup) {\r\n\t\t\tvar optCreated = _.$('li[data-opt-group='+data.optGroup.label+']', main);\r\n\r\n\t\t\t// Created if not exists\r\n\t\t\tif (!optCreated) {\r\n\t\t\t\tlists.push(createOptGroup(data.optGroup, main, config));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar item = _.create('li');\r\n\t\tvar selected = data.item.hasAttribute('selected') ? '-selected' : '';\r\n\t\t_.addClass(item, 'pk-option '+ selected +' -'+config.theme);\r\n\r\n\t\t// Add circle for assign multiple options\r\n\t\tif (config.multiple) {\r\n\t\t\tvar circle = _.create('span');\r\n\t\t\t_.addClass(circle, 'pk-circle -' + config.theme);\r\n\t\t\titem.appendChild(circle);\r\n\r\n\r\n\t\t}\r\n\r\n\t\t// If empty value in option\r\n\t\tif (!data.item.value) {\r\n\t\t\t_.attr(item, 'style', 'display:none;');\r\n\t\t}\r\n\r\n\t\tvar icon = _.create('span');\r\n\t\t_.addClass(icon, 'icon');\r\n\t\ticon.innerHTML = _.attr(data.item, 'data-icon') || '';\r\n\r\n\t\tvar txt = _.create('span');\r\n\t\t_.addClass(txt, 'txt');\r\n\t\ttxt.innerHTML = data.item.innerHTML;\r\n\r\n\t\tmain.appendChild(item);\r\n\t\titem.appendChild(icon);\r\n\r\n\t\t// Pay attention to always be the last child\r\n\t\titem.appendChild(txt);\r\n\r\n\t\t// feed data with important info\t\r\n\t\tdata.txt = txt.innerHTML;\r\n\r\n\t\t// Event listener\r\n\t\t_.events(item, 'click', function(e){\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\r\n\t\t\t/**\r\n\t\t\t * Multiple options selected\r\n\t\t\t */\r\n\t\t\tif (config.multiple) {\r\n\r\n\t\t\t\tdata.field = select.parentElement.querySelector('.pk-field');\r\n\r\n\t\t\t\t// If selected, deselect\r\n\t\t\t\tif (select[data.index].hasAttribute('selected')) {\r\n\t\t\t\t\tselect[data.index].removeAttribute('selected');\r\n\t\t\t\t\t_.rmClass(item, '-selected');\r\n\t\t\t\t\tvar tag = _.$('.pk-tag[data-select=\"'+select.name.replace('[]', '')+data.index+'\"]');\r\n\t\t\t\t\tdata.field.removeChild(tag);\r\n\r\n\t\t\t\t\tif (!data.field.children.length) {\r\n\t\t\t\t\t\tdata.field.innerHTML = _.attr(select, 'placeholder');\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// If not selected\r\n\t\t\t\t_.attr(select[data.index], 'selected', 'selected');\t\t\t\t\r\n\r\n\t\t\t\t// Class selected in option modal\r\n\t\t\t\t_.addClass(item, '-selected');\r\n\t\t\t\t\r\n\t\t\t\tsetOptionMultiple(select, data, config);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Normal selected\r\n\t\t\t */\r\n\t\t\tsetOptionSimple(select, data);\r\n\r\n\t\t});\r\n\r\n\t\t// If it is empty, it indicates that there is no option group \r\n\t\tif (!lists.length) {\r\n\t\t\treturn item;\r\n\t\t}\r\n\r\n\t\t// If option group, returns an array\r\n\t\tlists.push(item);\r\n\t\treturn lists;\r\n\t}\r\n\r\n\t/**\r\n\t * Handled by Event for select field with multiple option\r\n\t * @param {HTMLObject} select\r\n\t * @param {Object} data\r\n\t * @param {Object} config\r\n\t */\r\n\tfunction setOptionMultiple(select, data, config){\r\n\r\n\t\t// Erase placeholder of the field\t\t\r\n\t\tif (!data.field.children.length) {\r\n\t\t\tdata.field.innerHTML = '';\r\n\t\t}\r\n\r\n\t\t// tags\r\n\t\tvar tag = _.create('div'),\r\n\t\t\ttxtTag = _.create('span'),\r\n\t\t\tcloseTag = _.create('span');\r\n\r\n\t\t_.addClass(tag, 'pk-tag -'+config.theme);\r\n\t\t_.attr(tag, 'data-select', select.name.replace('[]', '')+data.index);\r\n\r\n\t\t_.addClass(txtTag, 'txt');\r\n\t\t_.addClass(closeTag, 'close');\r\n\r\n\t\ttxtTag.innerHTML = data.txt;\r\n\t\tcloseTag.innerHTML = '&times;';\r\n\r\n\t\ttag.appendChild(txtTag);\r\n\t\ttag.appendChild(closeTag);\r\n\t\tdata.field.appendChild(tag);\r\n\r\n\t\tvar index = data.index;\r\n\r\n\t\t// Listener\r\n\t\t_.events(closeTag, 'click', function(e){\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\r\n\t\t\t// Deselect\r\n\t\t\tselect[index].removeAttribute('selected');\r\n\r\n\t\t\t// Remove a tag\r\n\t\t\tdata.field.removeChild(e.target.parentElement);\r\n\r\n\t\t\tif (!data.field.children.length) {\r\n\t\t\t\tdata.field.innerHTML = _.attr(select, 'placeholder');\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\r\n\t\treturn;\t\t\r\n\t}\r\n\r\n\t/**\r\n\t * Event for select field simple\r\n\t * @param {HTMLObject} select\r\n\t * @param {Object} data\r\n\t */\r\n\tfunction setOptionSimple(select, data, txt){\r\n\t\t_.toArray(select).map(function(option, index){\r\n\t\t\tif (index === data.index) {\r\n\t\t\t\t_.attr(option, 'selected', 'selected');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\toption.removeAttribute('selected');\r\n\t\t});\r\n\t\t\r\n\t\tfeedField(select, data.txt);\t\t\r\n\t\tcloseModal();\r\n\t}\r\n\r\n\tfunction feedField(select, value){\r\n\t\tselect.parentElement.querySelector('.pk-field').innerHTML = value;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets a value (option) default for field select\r\n\t */\r\n\tfunction setInitialValue(config){\r\n\t\tsetElement(config);\t\r\n\r\n\t\townConfig.DOM.forEach(function(select){\r\n\t\t\tfeedField(select, select[select.selectedIndex].innerHTML);\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the values (options) default for field multiple selected\r\n\t */\r\n\tfunction setInitialValueMultiple(config){\r\n\t\t\r\n\t\tvar data = {};\r\n\t\tsetElement(config);\t\r\n\r\n\t\townConfig.DOM.forEach(function(select){\r\n\t\tdata.field = select.parentElement.querySelector('.pk-field');\r\n\r\n\t\t\t_.toArray(select).forEach(function(option, index){\r\n\r\n\t\t\t\tif (option.hasAttribute('selected')) {\r\n\t\t\t\t\tdata.index = index;\r\n\t\t\t\t\tdata.txt = option.innerHTML;\r\n\r\n\t\t\t\t\tsetOptionMultiple(select, data, ownConfig);\t\t\t\t \t\t\t\t\t\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\r\n\t\t});\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Prepare the divs that will be used for modal with options\r\n\t */\r\n\tfunction prepareModal(){\r\n\r\n\t\t// Checks has been created\r\n\t\tif (_.$('.pk-overlay')) {\r\n\t\t\treturn;\r\n\t\t}\t\r\n\r\n\t\tvar overlay = _.create('div');\r\n\t\t_.addClass(overlay, 'pk-overlay');\r\n\r\n\t\tvar modal = _.create('div');\r\n\t\t_.addClass(modal, 'pk-modal');\t\t\r\n\r\n\t\tvar mainModal = _.create('ul');\r\n\t\t_.addClass(mainModal, 'main');\r\n\r\n\t\tvar head = _.create('div');\r\n\t\t_.addClass(head, 'head');\r\n\r\n\t\tvar search = _.create('div');\r\n\t\t_.addClass(search, 'pk-search');\t\r\n\t\tvar inputSearch = _.create('input');\r\n\t\t_.attr(inputSearch, 'type', 'text');\r\n\r\n\t\tvar multiple = _.create('div');\r\n\t\t_.addClass(multiple, 'pk-multiple');\r\n\r\n\t\tvar btnMultiple = _.create('button');\r\n\t\t_.addClass(btnMultiple, 'pk-btnMultiply');\r\n\t\tbtnMultiple.innerHTML = ownConfig.txtBtnMultiple;\r\n\r\n\t\tvar close = _.create('span');\r\n\t\t_.addClass(close, 'close');\r\n\t\tclose.innerHTML = '&times;';\r\n\r\n\t\tdocument.body.appendChild(overlay);\r\n\t\tdocument.body.appendChild(modal);\r\n\t\tmodal.appendChild(head);\r\n\t\tmodal.appendChild(search);\r\n\t\tsearch.appendChild(inputSearch);\r\n\t\tmodal.appendChild(close);\r\n\t\tmodal.appendChild(mainModal);\r\n\t\tmodal.appendChild(multiple);\r\n\t\tmultiple.appendChild(btnMultiple);\r\n\r\n\t\t// Event listener\r\n\t\t[overlay, close, btnMultiple].forEach(function(element){\r\n\t\t\t_.events(element, 'click', function(e){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\te.stopPropagation();\r\n\r\n\t\t\t\tcloseModal();\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t}\t\r\n\r\n\t/**\r\n\t * Resume normal classes and removes the content from within the modal\r\n\t * @param  {object DOM} overlay\r\n\t * @param  {object DOM} modal\r\n\t */\r\n\tfunction closeModal(){\r\n\t\tvar overlay = _.$('.pk-overlay');\r\n\t\tvar modal = _.$('.pk-modal');\r\n\t\tvar search = _.$('.pk-search', modal);\r\n\t\tvar multiple = _.$('.pk-multiple', modal);\r\n\r\n\t\t_.attr(modal, 'class', 'pk-modal');\r\n\t\t_.attr(multiple, 'class', 'pk-multiple');\r\n\t\t_.attr(search, 'class', 'pk-search');\r\n\t\t_.attr(overlay, 'class', 'pk-overlay');\r\n\r\n\t\tsetTimeout(function(){\r\n\t\t\t_.$('.main', modal).innerHTML = '';\r\n\t\t}, 500);\r\n\t}\r\n\r\n\t/**\r\n\t * Merges the settings passed by the user with the default settings of the package, adding their own configurations\r\n\t */\r\n\tfunction mergeToDefaults(config){\r\n\t\t\r\n\t\townConfig = JSON.parse(JSON.stringify(defaults));\r\n\r\n\t\tfor (var item in config) {\r\n\t\t\tif (config.hasOwnProperty(item)) {\r\n\t\t\t\townConfig[item] = config[item];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tconsole.timeEnd('BMPickout');\t\r\n\r\n\t// Revealing the methods that shall be public\r\n\treturn {\r\n\t\tto : init,\r\n\t\tupdated : setInitialValue,\r\n\t\tupdatedMultiple : setInitialValueMultiple\r\n\t};\r\n\r\n\r\n})();\r\n\r\nif (typeof module !== 'undefined' && module.exports) {\r\n    module.exports = pickout;\r\n}"],"sourceRoot":"/source/"}